<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„ì˜ ì—­ì‚¬: ì§„ì‹¤ì˜ íƒ€ì„ë¼ì¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #fdfbf7; color: #333; }
        .chart-container { 
            position: relative; 
            width: 100%; 
            max-width: 600px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 300px; 
            max-height: 400px; 
        } 
        @media (min-width: 768px) { 
            .chart-container { height: 350px; } 
        }
        /* Timeline Core Styles */
        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px; /* Thicker line */
            background: linear-gradient(to bottom, #e5e7eb 0%, #cbd5e1 50%, #e5e7eb 100%);
            transform: translateX(-50%);
            z-index: 0;
            border-radius: 2px;
        }
        
        /* Animation Classes */
        .timeline-item {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.7s cubic-bezier(0.22, 1, 0.36, 1);
        }
        .timeline-item.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Connector Lines */
        .connector-line {
            position: absolute;
            top: 2rem; /* Aligns with dot */
            height: 2px;
            background-color: #cbd5e1;
            width: 2rem; /* Length of connector */
            z-index: 0;
        }

        .timeline-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 20px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
            border-color: #3b82f6;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
    <!-- Chosen Palette: Warm Neutral (Background: #fdfbf7), Deep Navy (#1e3a8a for accents/headers), Muted Blue (#3b82f6 for interactions), Slate (#64748b for text) -->
</head>
<body class="antialiased selection:bg-blue-100 selection:text-blue-900">

    <!-- Header / Hero -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm backdrop-blur-md bg-opacity-90">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2 cursor-pointer" onclick="window.scrollTo({top:0, behavior:'smooth'})">
                <div class="w-8 h-8 bg-blue-900 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-md">ë…</div>
                <h1 class="text-xl font-bold text-slate-800 tracking-tight">ë…ë„ ì—­ì‚¬ ì•„ì¹´ì´ë¸Œ</h1>
            </div>
            <nav class="hidden md:flex gap-6 text-sm font-medium text-slate-600">
                <button onclick="window.location.href='index.html'" class="hover:text-blue-900 transition-colors font-bold text-blue-900 flex items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    í™ˆ
                </button>
                <button onclick="scrollToSection('dashboard')" class="hover:text-blue-900 transition-colors">ë°ì´í„° ë¶„ì„</button>
                <button onclick="scrollToSection('timeline')" class="hover:text-blue-900 transition-colors">ì—­ì‚¬ íƒ€ì„ë¼ì¸</button>
                <button onclick="scrollToSection('summary')" class="hover:text-blue-900 transition-colors">í•µì‹¬ ìš”ì•½</button>
            </nav>
            <!-- Mobile Home Button -->
            <button onclick="window.location.href='index.html'" class="md:hidden p-2 text-slate-600 hover:text-blue-900 transition-colors" aria-label="í™ˆìœ¼ë¡œ ì´ë™">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
            </button>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">

        <!-- Intro Section -->
        <section id="summary" class="bg-white rounded-2xl p-8 shadow-sm border border-gray-100 transition-transform hover:shadow-md">
            <div class="max-w-3xl mx-auto text-center space-y-4">
                <h2 class="text-3xl font-bold text-slate-800">ëŒ€í•œë¯¼êµ­ì˜ ì•„ì¹¨ì´ ì‹œì‘ë˜ëŠ” ê³³, ë…ë„</h2>
                <p class="text-lg text-slate-600 leading-relaxed">
                    ë…ë„ì˜ ì—­ì‚¬ëŠ” ë‹¨ìˆœí•œ ì˜í†  ë¬¸ì œë¥¼ ë„˜ì–´, ê³¼ê±° ì œêµ­ì£¼ì˜ ì¹¨ëµì— í¬ìƒëœ ìš°ë¦¬ ì˜í† ë¥¼ ë˜ì°¾ê³  ì§€ì¼œë‚´ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.
                    <br>ê³ ëŒ€ì˜ íƒ„ìƒë¶€í„° ì¡°ì„ ì˜ ì‹¤íš¨ì  ì§€ë°°, ê·¸ë¦¬ê³  í˜„ëŒ€ì˜ ì£¼ê¶Œ ìˆ˜í˜¸ ë…¸ë ¥ê¹Œì§€, ë…ë„ì˜ ì§„ì‹¤ëœ ì—­ì‚¬ë¥¼ ë°ì´í„°ë¥¼ í†µí•´ í™•ì¸í•´ë³´ì„¸ìš”.
                </p>
                <div class="flex flex-wrap justify-center gap-4 mt-4 text-sm text-slate-500">
                    <span class="px-3 py-1 bg-blue-50 text-blue-700 rounded-full font-medium">ğŸ“„ ì—­ì‚¬ì  ê¸°ë¡: 1454ë…„~</span>
                    <span class="px-3 py-1 bg-blue-50 text-blue-700 rounded-full font-medium">ğŸŒ ì§€ë¦¬ì  ì‹¤ì²´: 460ë§Œë…„ ì „</span>
                    <span class="px-3 py-1 bg-blue-50 text-blue-700 rounded-full font-medium">ğŸ›¡ï¸ ì‹¤íš¨ì  ì§€ë°°: í˜„ì¬ ì§„í–‰í˜•</span>
                </div>
            </div>
        </section>

        <!-- Analytics Dashboard -->
        <section id="dashboard">
            <div class="mb-6 border-b border-gray-200 pb-4">
                <h3 class="text-2xl font-bold text-slate-800 mb-2 flex items-center gap-2">
                    <span>ğŸ“Š</span> ë°ì´í„°ë¡œ ë³´ëŠ” ë…ë„ ì—­ì‚¬
                </h3>
                <p class="text-slate-600">ì „ì²´ ì—­ì‚¬ì  ì‚¬ê±´ì„ ìœ í˜•ë³„, ì‹œëŒ€ë³„ë¡œ ë¶„ì„í•˜ì—¬ ë…ë„ ì˜ìœ ê¶Œì˜ ê·¼ê±°ë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Chart 1: Event Types -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg transition-shadow">
                    <h4 class="text-lg font-semibold text-slate-700 mb-4 text-center">ì£¼ìš” ì‚¬ê±´ ìœ í˜• ë¶„ì„</h4>
                    <div class="chart-container">
                        <canvas id="typeChart"></canvas>
                    </div>
                    <p class="text-xs text-center text-gray-400 mt-4">ì‚¬ê±´ì˜ ì„±ê²©ì— ë”°ë¥¸ ë¶„ë¥˜ (ê¸°ë¡, ë¶„ìŸ, ìˆ˜í˜¸ í™œë™ ë“±)</p>
                </div>

                <!-- Chart 2: Timeline Distribution -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg transition-shadow">
                    <h4 class="text-lg font-semibold text-slate-700 mb-4 text-center">ì‹œëŒ€ë³„ ê¸°ë¡ ë¹ˆë„</h4>
                    <div class="chart-container">
                        <canvas id="eraChart"></canvas>
                    </div>
                    <p class="text-xs text-center text-gray-400 mt-4">ê³ ëŒ€ë¶€í„° í˜„ëŒ€ê¹Œì§€ ì‹œê¸°ë³„ ê´€ë ¨ ì‚¬ê±´ ë°œìƒ ë¹ˆë„</p>
                </div>
            </div>
        </section>

        <!-- Interactive Timeline Section -->
        <section id="timeline" class="relative">
            <div class="mb-12 flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-gray-200 pb-4">
                <div>
                    <h3 class="text-2xl font-bold text-slate-800 mb-2 flex items-center gap-2">
                        <span>ğŸ•°ï¸</span> ì—°ë„ë³„ ìƒì„¸ íƒ€ì„ë¼ì¸
                    </h3>
                    <p class="text-slate-600">ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ ì—­ì‚¬ì˜ íë¦„ì„ ë”°ë¼ê°€ë³´ì„¸ìš”. (ìŠ¤í¬ë¡¤ ì‹œ ì‚¬ê±´ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤)</p>
                </div>
                
                <!-- Filters -->
                <div class="flex flex-wrap gap-2">
                    <button onclick="filterTimeline('all')" class="filter-btn active px-4 py-2 rounded-lg text-sm font-medium transition-all bg-blue-900 text-white shadow-md hover:scale-105" data-filter="all">ì „ì²´ ë³´ê¸°</button>
                    <button onclick="filterTimeline('evidence')" class="filter-btn px-4 py-2 rounded-lg text-sm font-medium bg-white text-slate-600 border border-gray-200 hover:bg-gray-50 transition-all hover:scale-105" data-filter="evidence">ğŸ“š ë¬¸í—Œ/ì§€ë„ ì¦ê±°</button>
                    <button onclick="filterTimeline('conflict')" class="filter-btn px-4 py-2 rounded-lg text-sm font-medium bg-white text-slate-600 border border-gray-200 hover:bg-gray-50 transition-all hover:scale-105" data-filter="conflict">âš”ï¸ ì¹¨ëµê³¼ ê°ˆë“±</button>
                    <button onclick="filterTimeline('defense')" class="filter-btn px-4 py-2 rounded-lg text-sm font-medium bg-white text-slate-600 border border-gray-200 hover:bg-gray-50 transition-all hover:scale-105" data-filter="defense">ğŸ›¡ï¸ ìˆ˜í˜¸ ë° ê´€ë¦¬</button>
                </div>
            </div>

            <!-- Timeline Content -->
            <div class="relative py-4" id="timeline-container">
                <!-- Vertical Line -->
                <div class="timeline-line hidden md:block"></div>
                
                <!-- Dynamic Items will be injected here -->
                <div id="timeline-list" class="space-y-4 md:space-y-0 relative">
                    <!-- JS renders cards here -->
                </div>
            </div>
            
            <div id="no-results" class="hidden text-center py-20 bg-gray-50 rounded-xl">
                <p class="text-slate-500 text-lg">í•´ë‹¹ ì¡°ê±´ì— ë§ëŠ” ì—­ì‚¬ì  ì‚¬ê±´ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                <button onclick="filterTimeline('all')" class="mt-4 text-blue-600 hover:underline">ì „ì²´ ë³´ê¸°ë¡œ ëŒì•„ê°€ê¸°</button>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-300 mt-20 py-12">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <h5 class="text-white font-bold text-lg mb-4">ë…ë„ ì—­ì‚¬ ì•„ì¹´ì´ë¸Œ</h5>
            <p class="font-medium mb-2">ë…ë„ëŠ” ì—­ì‚¬ì , ì§€ë¦¬ì , êµ­ì œë²•ì ìœ¼ë¡œ ëª…ë°±í•œ ëŒ€í•œë¯¼êµ­ì˜ ì˜í† ì…ë‹ˆë‹¤.</p>
            <p class="text-sm opacity-60">ìë£Œ ì¶œì²˜: ë…ë„ ê´€ë ¨ êµìœ¡ ìë£Œ (ì œê³µëœ ì›ë³¸ ë³´ê³ ì„œ ê¸°ë°˜)</p>
            <div class="mt-8 flex justify-center gap-4 text-sm">
                <span>Made with ğŸ‡°ğŸ‡·</span>
            </div>
        </div>
    </footer>

    <script>
        // --- Data Source ---
        const dokdoData = [
            { year: "ì•½ 460ë§Œ~250ë§Œ ë…„ ì „", event: "ë…ë„ íƒ„ìƒ", detail: "í™”ì‚° í™œë™ìœ¼ë¡œ í˜•ì„± (ìš¸ë¦‰ë„, ì œì£¼ë„ë³´ë‹¤ ì•ì„œ ìƒì„±ë¨)", type: "nature", era: "ancient" },
            { year: "1454ë…„", event: "ã€Šì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€ã€‹ ê¸°ë¡", detail: "ìš°ì‚°(ë…ë„)ê³¼ ë¬´ë¦‰(ìš¸ë¦‰ë„) ë‘ ì„¬ì„ ê°•ì›ë„ ìš¸ì§„í˜„ ì†Œì†ìœ¼ë¡œ ê¸°ë¡í•˜ì—¬ ì¡°ì„ ì˜ ì˜í† ì„ì„ ëª…í™•íˆ í•¨.", type: "evidence", era: "joseon" },
            { year: "1481ë…„", event: "ã€ˆíŒ”ë„ì´ë„ã€‰ ì œì‘", detail: "ë™í•´ì— ìš¸ë¦‰ë„ì™€ ìš°ì‚°ë„ ë‘ ì„¬ì„ ëª…ê¸°í•¨.", type: "evidence", era: "joseon" },
            { year: "1531ë…„", event: "ã€Šì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒã€‹ í¸ì°¬", detail: "ê°•ì›ë„ ìš¸ì§„í˜„ ì¡°ì— ë…ë„ì— ê´€í•œ ë‚´ìš©ì„ ê¸°ìˆ í•¨.", type: "evidence", era: "joseon" },
            { year: "1667ë…„", event: "ì¼ë³¸ ã€Šì€ì£¼ì‹œì²­í•©ê¸°ã€‹", detail: "ì¼ë³¸ ê´€ë¦¬ê°€ ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¡°ì„ ì˜ ë•…ì„ì„ ì¼ë³¸ ìŠ¤ìŠ¤ë¡œ ëª…ì‹œí•œ ê¸°ë¡.", type: "evidence", era: "joseon" },
            { year: "1693ë…„", event: "ì œ1ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", detail: "ì•ˆìš©ë³µì´ ì¼ë³¸ ì–´ë¶€ë“¤ì—ê²Œ ë‚©ì¹˜ëœ í›„, ì¼ë³¸ìœ¼ë¡œ ê±´ë„ˆê°€ ë…ë„ê°€ ì¡°ì„  ë•…ì„ì„ ê°•ë ¥íˆ ì£¼ì¥.", type: "defense", era: "joseon" },
            { year: "1696ë…„", event: "ì œ2ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", detail: "ì¼ë³¸ ë§‰ë¶€ê°€ 'ì£½ë„(ìš¸ë¦‰ë„) ë„í•´ ê¸ˆì§€ë ¹'ì„ í•˜ë‹¬í•˜ì—¬ ì¡°ì„  ì˜í† ì„ì„ ì¸ì •.", type: "defense", era: "joseon" },
            { year: "1697ë…„ ~ 1894ë…„", event: "ìˆ˜í† ê´€ ì œë„ ì‹¤ì‹œ", detail: "ì¡°ì„  ì •ë¶€ê°€ 3ë…„ì— í•œ ë²ˆì”© ê´€ë¦¬ë¥¼ íŒŒê²¬í•˜ì—¬ ìš¸ë¦‰ë„ì™€ ì£¼ë³€ ì„¬ì„ ì¡°ì‚¬ ë° ê´€ë¦¬.", type: "defense", era: "joseon" },
            { year: "1779ë…„", event: "ì¼ë³¸ ã€ˆê°œì • ì¼ë³¸ì—¬ì§€ë¡œì •ì „ë„ã€‰", detail: "ë…ë„ë¥¼ ì¼ë³¸ ì˜ì—­ ë°–ìœ¼ë¡œ í‘œì‹œí•˜ì—¬ ì¡°ì„  ì˜í† ì„ì„ ê°„ì ‘ ì¸ì •.", type: "evidence", era: "joseon" },
            { year: "1785ë…„", event: "í•˜ì•¼ì‹œ ì‹œí—¤ì´ ã€ˆì‚¼êµ­ì ‘ì–‘ì§€ë„ã€‰", detail: "ì¼ë³¸ ì‹¤í•™ìê°€ ì œì‘í•œ ì§€ë„ì— ë…ë„ë¥¼ ì¡°ì„ ê³¼ ê°™ì€ í™©ìƒ‰ìœ¼ë¡œ í‘œì‹œ.", type: "evidence", era: "joseon" },
            { year: "18ì„¸ê¸° ì¤‘ë°˜", event: "ì •ìƒê¸° ã€ˆë™êµ­ì§€ë„ã€‰", detail: "ë…ë„ë¥¼ 'ìš°ì‚°ë„'ë¡œ ì •í™•í•˜ê²Œ í‘œê¸°í•¨.", type: "evidence", era: "joseon" },
            { year: "1870ë…„", event: "ã€Šì¡°ì„ êµ­ êµì œì‹œë§ ë‚´íƒì„œã€‹", detail: "ì¼ë³¸ ì™¸ë¬´ì„± ë³´ê³ ì„œì—ì„œ ë…ë„ê°€ ì¡°ì„  ì˜í† ì„ì„ í™•ì¸.", type: "evidence", era: "modern_pre" },
            { year: "1877ë…„", event: "íƒœì •ê´€ ì§€ë ¹", detail: "ì¼ë³¸ ìµœê³  í–‰ì •ê¸°ê´€(íƒœì •ê´€)ì´ 'ë…ë„ëŠ” ì¼ë³¸ê³¼ ê´€ê³„ì—†ìŒ'ì„ ê³µì‹ ê²°ì •.", type: "evidence", era: "modern_pre" },
            { year: "1900ë…„ 10ì›” 25ì¼", event: "ëŒ€í•œì œêµ­ ì¹™ë ¹ ì œ41í˜¸", detail: "ë…ë„ë¥¼ ìš¸ë„êµ° ê´€í• ë¡œ ëª…ë¬¸í™”í•˜ì—¬ ì˜ìœ ê¶Œì„ í™•ê³ íˆ í•¨ (ë…ë„ì˜ ë‚  ìœ ë˜).", type: "defense", era: "modern_pre" },
            { year: "1905ë…„", event: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ ì œ40í˜¸", detail: "ëŸ¬ì¼ì „ìŸ ì¤‘ ì¼ë³¸ ë‚´ê° ê²°ì •ìœ¼ë¡œ ë…ë„ë¥¼ ë¶ˆë²•ì ìœ¼ë¡œ ìêµ­ ì˜í† ì— í¸ì… ì‹œë„.", type: "conflict", era: "imperial" },
            { year: "1906ë…„", event: "ìš¸ë¦‰êµ°ìˆ˜ ì‹¬í¥íƒ ë³´ê³ ", detail: "ì¼ë³¸ì˜ ë¶ˆë²• í¸ì… ì‚¬ì‹¤ì„ ë³´ê³ , ì˜ì •ë¶€ì—ì„œ ã€ˆì§€ë ¹ ì œ3í˜¸ã€‰ë¡œ ë°˜ë°•.", type: "defense", era: "imperial" },
            { year: "1946ë…„ 1ì›” 29ì¼", event: "SCAPIN ì œ677í˜¸", detail: "ì—°í•©êµ° ìµœê³ ì‚¬ë ¹ê´€ ê°ì„œë¥¼ í†µí•´ ë…ë„ë¥¼ ì¼ë³¸ì˜ í†µì¹˜ ë²”ìœ„ì—ì„œ ì œì™¸í•¨.", type: "evidence", era: "modern_post" },
            { year: "1951ë…„ 9ì›” 8ì¼", event: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½", detail: "ì¡°ì•½ ì²´ê²° (ì´ˆì•ˆì—ëŠ” í•œêµ­ ì˜í†  ëª…ì‹œ, ìµœì¢…ì•ˆì—” ëª…ì‹œì  ì–¸ê¸‰ ëˆ„ë½ë˜ë‚˜ ë°°ì œë˜ì§€ ì•ŠìŒ).", type: "conflict", era: "modern_post" },
            { year: "1952ë…„ 1ì›” 18ì¼", event: "í‰í™”ì„ (ì´ìŠ¹ë§Œ ë¼ì¸) ì„ í¬", detail: "ì´ìŠ¹ë§Œ ëŒ€í†µë ¹ì´ ë…ë„ë¥¼ í¬í•¨í•œ ì¸ê·¼ í•´ì–‘ì— ëŒ€í•œ ì£¼ê¶Œ ì„ ì–¸.", type: "defense", era: "modern_post" },
            { year: "1953ë…„", event: "ë…ë„ ë°©ì–´ í™œë™ ì‹œì‘", detail: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ ë° ë…ë„ê²½ë¹„ëŒ€ í™œë™ ì‹œì‘.", type: "defense", era: "modern_post" },
            { year: "1954ë…„, 1962ë…„", event: "ICJ ì œì†Œ ì œì•ˆ ê±°ë¶€", detail: "ì¼ë³¸ì´ ë…ë„ ë¬¸ì œë¥¼ êµ­ì œì‚¬ë²•ì¬íŒì†Œ(ICJ)ì— íšŒë¶€í•˜ìê³  ì œì•ˆí–ˆìœ¼ë‚˜ í•œêµ­ ì •ë¶€ ê±°ë¶€.", type: "conflict", era: "modern_post" },
            { year: "1965ë…„ 6ì›”", event: "í•œì¼ ê¸°ë³¸ì¡°ì•½ ì²´ê²°", detail: "í•œì¼ ì–´ì—…í˜‘ì • ì²´ê²° ë° í•œì¼ êµ­êµ ì •ìƒí™”.", type: "conflict", era: "modern_post" },
            { year: "1968ë…„ / 1981ë…„", event: "ìµœì´ˆ ë…ë„ ì£¼ë¯¼ ê±°ì£¼", detail: "ìµœì¢…ë• ì”¨ ë…ë„ ê±°ì£¼ ì‹œì‘ ë° ì£¼ë¯¼ë“±ë¡ ì´ì „.", type: "defense", era: "contemporary" },
            { year: "1998ë…„ 9ì›”", event: "ì‹ í•œì¼ ì–´ì—…í˜‘ì •", detail: "ì¤‘ê°„ìˆ˜ì—­ ì„¤ì • ë¬¸ì œë¡œ ë…ë„ ì˜ìœ ê¶Œ ê°ˆë“± ì¬ì í™”.", type: "conflict", era: "contemporary" },
            { year: "2000ë…„ 3ì›”", event: "ë…ë„ìˆ˜í˜¸ëŒ€ ì°½ì„¤", detail: "ì‹œë¯¼ë‹¨ì²´ ì°½ì„¤ ë° 'ë…ë„ì˜ ë‚ ' ì œì • ìš´ë™ ì „ê°œ.", type: "defense", era: "contemporary" },
            { year: "2005ë…„ 3ì›” 16ì¼", event: "'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ ' ì¡°ë¡€", detail: "ì¼ë³¸ ì‹œë§ˆë„¤í˜„ ì˜íšŒê°€ ì¼ë°©ì ìœ¼ë¡œ 'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ ' ì¡°ë¡€ë¥¼ ì œì •.", type: "conflict", era: "contemporary" },
            { year: "2006ë…„ 4ì›” 25ì¼", event: "ëŒ€í†µë ¹ íŠ¹ë³„ë‹´í™”", detail: "ë…¸ë¬´í˜„ ëŒ€í†µë ¹, ë…ë„ ë¬¸ì œì™€ ê´€ë ¨í•˜ì—¬ ì¼ë³¸ì˜ ì¹¨ëµ ì—­ì‚¬ ë¹„íŒ ë° ê°•ê²½ ëŒ€ì‘ ì²œëª….", type: "defense", era: "contemporary" },
            { year: "2008ë…„", event: "ë…ë„ êµìœ¡ ê°•í™”", detail: "ë™ë¶ì•„ì—­ì‚¬ì¬ë‹¨ ë…ë„ì—°êµ¬ì†Œ ì„¤ë¦½, ì¼ë³¸ í•™ìŠµì§€ë„ìš”ë ¹ í•´ì„¤ì„œì— ë…ë„ ëª…ê¸° ì‹œì‘.", type: "defense", era: "contemporary" },
            { year: "2011ë…„ ~ 2015ë…„", event: "ì¼ë³¸ êµê³¼ì„œ ì™œê³¡ ì‹¬í™”", detail: "ì¼ë³¸ ì¤‘Â·ì´ˆë“±í•™êµ êµê³¼ì„œ ë‚´ ë…ë„ ì˜ìœ ê¶Œ ì™œê³¡ ê¸°ìˆ  ê¸‰ì¦.", type: "conflict", era: "contemporary" }
        ];

        // --- State Management ---
        let currentFilter = 'all';

        // --- Chart Initialization ---
        function initCharts() {
            const typeCounts = { evidence: 0, defense: 0, conflict: 0, nature: 0 };
            const eraCounts = { ancient: 0, joseon: 0, modern_pre: 0, imperial: 0, modern_post: 0, contemporary: 0 };

            dokdoData.forEach(item => {
                if (typeCounts[item.type] !== undefined) typeCounts[item.type]++;
                if (eraCounts[item.era] !== undefined) eraCounts[item.era]++;
            });

            // 1. Event Type Chart (Doughnut)
            const ctxType = document.getElementById('typeChart').getContext('2d');
            new Chart(ctxType, {
                type: 'doughnut',
                data: {
                    labels: ['ë¬¸í—Œ/ì§€ë„ ì¦ê±°', 'ìˆ˜í˜¸ ë° ê´€ë¦¬', 'ì¹¨ëµ/ê°ˆë“±', 'ìì—° í˜•ì„±'],
                    datasets: [{
                        data: [typeCounts.evidence, typeCounts.defense, typeCounts.conflict, typeCounts.nature],
                        backgroundColor: ['#3b82f6', '#10b981', '#ef4444', '#94a3b8'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { boxWidth: 12, font: { family: 'Noto Sans KR' } } }
                    }
                }
            });

            // 2. Era Distribution Chart (Bar)
            const ctxEra = document.getElementById('eraChart').getContext('2d');
            const eraLabels = {
                ancient: 'ê³ ëŒ€/í˜•ì„±', joseon: 'ì¡°ì„ ì‹œëŒ€', modern_pre: 'ê°œí•­ê¸°', 
                imperial: 'ì¼ì œê°•ì ê¸°', modern_post: 'ê´‘ë³µ ì§í›„', contemporary: 'í˜„ëŒ€'
            };

            new Chart(ctxEra, {
                type: 'bar',
                data: {
                    labels: Object.keys(eraCounts).map(k => eraLabels[k]),
                    datasets: [{
                        label: 'ê´€ë ¨ ì‚¬ê±´ ìˆ˜',
                        data: Object.values(eraCounts),
                        backgroundColor: '#1e3a8a',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, ticks: { stepSize: 1 } },
                        x: { grid: { display: false } }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }

        // --- Intersection Observer for Scroll Animation ---
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.1
        };

        const timelineObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target); // Animate once
                }
            });
        }, observerOptions);

        // --- Timeline Rendering ---
        function renderTimeline(filter) {
            const container = document.getElementById('timeline-list');
            const noResults = document.getElementById('no-results');
            container.innerHTML = '';

            const filteredData = filter === 'all' 
                ? dokdoData 
                : dokdoData.filter(item => item.type === filter);

            if (filteredData.length === 0) {
                noResults.classList.remove('hidden');
                return;
            } else {
                noResults.classList.add('hidden');
            }

            filteredData.forEach((item, index) => {
                // Determine alignment: Alternate left/right on desktop
                const isLeft = index % 2 === 0;
                
                // Color coding
                let badgeColor = "bg-gray-100 text-gray-600";
                let borderColor = "border-gray-200";
                let icon = "ğŸ“Œ";
                
                if (item.type === 'evidence') { 
                    badgeColor = "bg-blue-100 text-blue-800"; 
                    borderColor = "border-blue-200";
                    icon = "ğŸ“š"; 
                }
                if (item.type === 'defense') { 
                    badgeColor = "bg-green-100 text-green-800"; 
                    borderColor = "border-green-200";
                    icon = "ğŸ›¡ï¸"; 
                }
                if (item.type === 'conflict') { 
                    badgeColor = "bg-red-100 text-red-800"; 
                    borderColor = "border-red-200";
                    icon = "âš”ï¸"; 
                }

                // Connector line HTML
                // For Left Item: Line is on the right side of the item
                // For Right Item: Line is on the left side of the item
                const connectorHTML = `
                    <div class="hidden md:block connector-line absolute top-8 border-b-2 border-dashed border-gray-300" 
                         style="${isLeft ? 'right: -2rem; width: 2rem;' : 'left: -2rem; width: 2rem;'}">
                    </div>`;

                const html = `
                    <div class="timeline-item relative flex flex-col md:flex-row items-center justify-between w-full mb-8 md:mb-12 group">
                        
                        <!-- Desktop Center Dot (Interactive) -->
                        <div class="hidden md:flex absolute left-1/2 top-6 w-5 h-5 rounded-full border-4 border-white shadow-md bg-slate-400 group-hover:bg-blue-600 group-hover:scale-125 transition-all duration-300 z-10 -translate-x-1/2 cursor-pointer" title="${item.year}"></div>

                        <!-- Left Side Content -->
                        <div class="order-1 w-full md:w-[45%] relative ${isLeft ? '' : 'md:order-2'}">
                            ${isLeft ? connectorHTML : ''} <!-- Connector for Left Card -->
                            
                            <div class="${isLeft ? 'md:text-right' : 'md:text-left'} bg-white p-6 rounded-xl border ${borderColor} shadow-sm timeline-card transition-all relative z-10">
                                <div class="flex flex-col ${isLeft ? 'md:items-end' : 'md:items-start'}">
                                    <span class="inline-block px-3 py-1 rounded-full text-xs font-bold mb-3 shadow-sm ${badgeColor}">${icon} ${item.year}</span>
                                    <h4 class="text-xl font-bold text-slate-800 mb-2 group-hover:text-blue-700 transition-colors">${item.event}</h4>
                                    <p class="text-slate-600 text-sm leading-relaxed">${item.detail}</p>
                                </div>
                            </div>
                        </div>

                        <!-- Spacer/Connector container for opposite side (Right side logic) -->
                        <div class="order-2 w-full md:w-[45%] relative ${isLeft ? 'md:order-2' : 'md:order-1'}">
                            ${!isLeft ? connectorHTML : ''} <!-- Connector for Right Card -->
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });

            // Re-attach observer to new elements
            document.querySelectorAll('.timeline-item').forEach(item => {
                timelineObserver.observe(item);
            });
        }

        // --- Interaction Handlers ---
        function filterTimeline(type) {
            currentFilter = type;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.dataset.filter === type) {
                    btn.classList.remove('bg-white', 'text-slate-600', 'border', 'border-gray-200');
                    btn.classList.add('bg-blue-900', 'text-white', 'shadow-md');
                } else {
                    btn.classList.add('bg-white', 'text-slate-600', 'border', 'border-gray-200');
                    btn.classList.remove('bg-blue-900', 'text-white', 'shadow-md');
                }
            });

            renderTimeline(type);
        }

        function scrollToSection(id) {
            const element = document.getElementById(id);
            if (element) {
                const headerOffset = 80;
                const elementPosition = element.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                window.scrollTo({ top: offsetPosition, behavior: "smooth" });
            }
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            renderTimeline('all');
        });

    </script>
</body>
</html>
